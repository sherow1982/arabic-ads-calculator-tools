<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>حاسبة Performance Max المتقدمة - توزيع ذكي للميزانية</title>
  <meta name="description" content="أداة متقدمة لحساب وتوزيع ميزانية حملات Performance Max على جميع قنوات Google">
  
  <!-- Global CSS -->
  <link rel="stylesheet" href="../global-styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  
  <style>
    .calculator-wrapper {
      background: var(--gradient);
      min-height: 100vh;
      padding: 20px;
    }
    
    .calculator-card {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 25px;
      padding: 40px;
      box-shadow: 0 25px 50px rgba(0,0,0,0.15);
    }
    
    .calculator-header h1 {
      font-size: 2.2rem;
      color: var(--text);
      margin-bottom: 15px;
      font-weight: 800;
      text-align: center;
    }
    
    .calculator-header p {
      color: var(--muted);
      font-size: 1.1rem;
      text-align: center;
      margin-bottom: 30px;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }
    
    .result-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 25px 0;
    }
    
    .result-card {
      background: var(--light-bg);
      border: 2px solid var(--border);
      border-radius: 15px;
      padding: 20px;
      text-align: center;
    }
    
    .result-value {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 5px;
    }
    
    .result-label {
      color: var(--muted);
      font-size: 0.9rem;
    }
    
    .channel-distribution {
      background: var(--light-bg);
      border-radius: 15px;
      padding: 25px;
      margin: 25px 0;
    }
    
    .channel-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }
    
    .channel-name {
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .channel-budget {
      font-weight: 700;
      color: var(--primary);
    }
    
    .recommendations {
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
      border-radius: 15px;
      padding: 25px;
      margin: 25px 0;
    }
    
    .recommendation-item {
      margin: 15px 0;
      padding: 15px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
    }
    
    .recommendation-title {
      font-weight: 700;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    @media (max-width: 768px) {
      .calculator-card {
        padding: 25px 20px;
      }
      
      .calculator-header h1 {
        font-size: 1.8rem;
      }
      
      .form-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="calculator-wrapper">
    <!-- زر العودة -->
    <a href="../index.html" class="unified-back-btn">
      <i class="fas fa-arrow-right"></i> العودة للرئيسية
    </a>
    
    <div class="calculator-card">
      <!-- Header -->
      <div class="calculator-header">
        <h1><i class="fas fa-bullseye"></i> حاسبة Performance Max المتقدمة</h1>
        <p>حسّن أداء حملات Performance Max مع التوزيع الذكي للميزانية عبر قنوات Google</p>
      </div>
      
      <!-- نموذج الإدخال -->
      <form id="performanceMaxForm">
        <div class="form-grid">
          <div class="unified-form-group">
            <label for="totalBudget">
              <i class="fas fa-dollar-sign"></i>
              الميزانية الشهرية (ريال)
            </label>
            <input type="number" id="totalBudget" min="1000" step="100" required placeholder="5000">
          </div>
          
          <div class="unified-form-group">
            <label for="businessType">
              <i class="fas fa-industry"></i>
              نوع النشاط التجاري
            </label>
            <select id="businessType" required>
              <option value="">اختر نوع النشاط</option>
              <option value="ecommerce">تجارة إلكترونية</option>
              <option value="services">خدمات مهنية</option>
              <option value="real-estate">عقارات</option>
              <option value="health">صحة وتجميل</option>
              <option value="education">تعليم</option>
              <option value="food">مطاعم وأغذية</option>
            </select>
          </div>
          
          <div class="unified-form-group">
            <label for="targetRegion">
              <i class="fas fa-map-marker-alt"></i>
              المنطقة المستهدفة
            </label>
            <select id="targetRegion" required>
              <option value="">اختر المنطقة</option>
              <option value="saudi">السعودية</option>
              <option value="uae">الإمارات</option>
              <option value="egypt">مصر</option>
              <option value="gulf">دول الخليج</option>
              <option value="levant">بلاد الشام</option>
            </select>
          </div>
          
          <div class="unified-form-group">
            <label for="campaignGoal">
              <i class="fas fa-target"></i>
              هدف الحملة
            </label>
            <select id="campaignGoal" required>
              <option value="">اختر الهدف</option>
              <option value="sales">زيادة المبيعات</option>
              <option value="leads">توليد عملاء محتملين</option>
              <option value="traffic">زيادة الزيارات</option>
              <option value="awareness">زيادة الوعي</option>
            </select>
          </div>
        </div>
        
        <button type="submit" class="unified-btn-primary">
          <i class="fas fa-calculator"></i>
          احسب توزيع Performance Max الأمثل
        </button>
      </form>
      
      <!-- النتائج -->
      <div id="results" class="unified-results">
        <!-- رسالة نجاح -->
        <div class="unified-success-message">
          <i class="fas fa-check-circle"></i>
          تم حساب توزيع Performance Max بنجاح!
        </div>
        
        <!-- مقاييس الأداء -->
        <div id="performanceMetrics" class="result-grid">
          <!-- سيتم ملؤها بـ JavaScript -->
        </div>
        
        <!-- توزيع القنوات -->
        <div class="channel-distribution">
          <h3><i class="fas fa-pie-chart"></i> توزيع الميزانية على قنوات Google</h3>
          <div id="channelAllocation">
            <!-- سيتم ملؤها بـ JavaScript -->
          </div>
        </div>
        
        <!-- التوصيات -->
        <div class="recommendations">
          <h3><i class="fas fa-lightbulb"></i> توصيات التحسين</h3>
          <div id="recommendationsList">
            <!-- سيتم ملؤها بـ JavaScript -->
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- أزرار عائمة -->
  <a href="https://wa.me/201110760081" class="unified-whatsapp-float" target="_blank">
    <i class="fab fa-whatsapp"></i>
  </a>
  
  <!-- Global JavaScript -->
  <script src="../shared-scripts.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('performanceMaxForm');
      const results = document.getElementById('results');
      
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        calculatePerformanceMax();
      });
      
      function calculatePerformanceMax() {
        // جمع البيانات
        const totalBudget = parseFloat(document.getElementById('totalBudget').value);
        const businessType = document.getElementById('businessType').value;
        const targetRegion = document.getElementById('targetRegion').value;
        const campaignGoal = document.getElementById('campaignGoal').value;
        
        // حساب توزيع القنوات
        const allocation = getChannelAllocation(businessType, campaignGoal);
        
        // عرض النتائج
        displayPerformanceMetrics(totalBudget, businessType, targetRegion);
        displayChannelAllocation(totalBudget, allocation);
        displayRecommendations(businessType, campaignGoal, targetRegion);
        
        // إظهار النتائج
        results.style.display = 'block';
        results.scrollIntoView({ behavior: 'smooth' });
      }
      
      function getChannelAllocation(businessType, campaignGoal) {
        const allocations = {
          'ecommerce': {
            'Search': 35,
            'Shopping': 25,
            'Display': 20,
            'YouTube': 15,
            'Discovery': 5
          },
          'services': {
            'Search': 45,
            'Display': 25,
            'YouTube': 20,
            'Discovery': 10
          },
          'real-estate': {
            'Search': 40,
            'Display': 30,
            'YouTube': 20,
            'Discovery': 10
          },
          'health': {
            'Search': 40,
            'YouTube': 25,
            'Display': 25,
            'Discovery': 10
          },
          'education': {
            'Search': 35,
            'YouTube': 30,
            'Display': 20,
            'Discovery': 15
          },
          'food': {
            'Search': 30,
            'Display': 25,
            'YouTube': 25,
            'Discovery': 20
          }
        };
        
        return allocations[businessType] || allocations['services'];
      }
      
      function displayPerformanceMetrics(budget, businessType, region) {
        const container = document.getElementById('performanceMetrics');
        
        // حسابات متوقعة
        const dailyBudget = Math.round(budget / 30);
        const expectedClicks = Math.round(budget / 2.5); // متوسط CPC
        const expectedConversions = Math.round(expectedClicks * 0.025); // 2.5% CVR
        const expectedRevenue = Math.round(budget * 3.5); // 3.5x ROAS
        
        const metrics = [
          { label: 'الميزانية اليومية', value: `${dailyBudget.toLocaleString()} ريال` },
          { label: 'النقرات المتوقعة', value: expectedClicks.toLocaleString() },
          { label: 'التحويلات المتوقعة', value: expectedConversions.toLocaleString() },
          { label: 'الإيرادات المتوقعة', value: `${expectedRevenue.toLocaleString()} ريال` }
        ];
        
        container.innerHTML = metrics.map(metric => `
          <div class="result-card">
            <div class="result-value">${metric.value}</div>
            <div class="result-label">${metric.label}</div>
          </div>
        `).join('');
      }
      
      function displayChannelAllocation(budget, allocation) {
        const container = document.getElementById('channelAllocation');
        const channels = {
          'Search': { icon: 'fas fa-search', name: 'شبكة البحث' },
          'Shopping': { icon: 'fas fa-shopping-bag', name: 'قناة التسوق' },
          'Display': { icon: 'fas fa-desktop', name: 'الشبكة الإعلانية' },
          'YouTube': { icon: 'fab fa-youtube', name: 'يوتيوب' },
          'Discovery': { icon: 'fas fa-compass', name: 'قناة الاكتشاف' }
        };
        
        container.innerHTML = Object.entries(allocation).map(([channel, percentage]) => {
          const channelBudget = Math.round(budget * percentage / 100);
          const channelInfo = channels[channel];
          
          return `
            <div class="channel-item">
              <div class="channel-name">
                <i class="${channelInfo.icon}"></i>
                ${channelInfo.name}
              </div>
              <div class="channel-budget">
                ${channelBudget.toLocaleString()} ريال (${percentage}%)
              </div>
            </div>
          `;
        }).join('');
      }
      
      function displayRecommendations(businessType, campaignGoal, region) {
        const container = document.getElementById('recommendationsList');
        
        const recommendations = [
          {
            icon: 'fas fa-chart-line',
            title: 'استراتيجية المزايدة',
            text: campaignGoal === 'sales' ? 
              'استخدم Target ROAS مع قيمة 350% للبداية ثم ارفعها تدريجياً' :
              'استخدم Maximize Conversions مع Target CPA محدد حسب هدفك'
          },
          {
            icon: 'fas fa-mobile-alt',
            title: 'تحسين الجوال',
            text: 'تأكد من تحسين موقعك للجوال - 80% من الزيارات تأتي من الهواتف'
          },
          {
            icon: 'fas fa-clock',
            title: 'فترة التعلم',
            text: 'اترك الحملة تتعلم لمدة 14-30 يوم قبل اتخاذ قرارات رئيسية'
          },
          {
            icon: 'fas fa-images',
            title: 'أصول عالية الجودة',
            text: 'استخدم صور وفيديوهات عالية الجودة مع نصوص عربية واضحة'
          }
        ];
        
        // إضافة توصيات مخصصة
        if (businessType === 'ecommerce') {
          recommendations.push({
            icon: 'fas fa-shopping-cart',
            title: 'تحسين المتجر',
            text: 'فعّل Google Merchant Center وأضف تقييمات العملاء لزيادة معدل النقر'
          });
        }
        
        container.innerHTML = recommendations.map(rec => `
          <div class="recommendation-item">
            <div class="recommendation-title">
              <i class="${rec.icon}"></i>
              ${rec.title}
            </div>
            <div>${rec.text}</div>
          </div>
        `).join('');
      }
    });
  </script>
</body>
</html>