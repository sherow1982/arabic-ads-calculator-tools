<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠ - ØªÙ„Ù‚Ø§Ø¦ÙŠ 100%</title>
  <link rel="icon" href="../favicon.svg">
  <link rel="stylesheet" href="../global-styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    .container{max-width:1200px;margin:0 auto;padding:20px}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;padding:25px;margin:20px 0;box-shadow:0 4px 16px rgba(0,0,0,.08)}
    .ai-card{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;text-align:center;border:none}
    .input-simple{width:100%;padding:18px 20px;border:3px solid #e5e7eb;border-radius:16px;font-family:inherit;font-size:1.2rem;font-weight:600;text-align:center;transition:all 0.3s}
    .input-simple:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 4px rgba(59,130,246,0.15);transform:scale(1.02)}
    .btn-ai{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;border-radius:30px;padding:16px 32px;cursor:pointer;font-weight:800;font-size:1.3rem;transition:all 0.4s;box-shadow:0 8px 25px rgba(102,126,234,0.3)}
    .btn-ai:hover{transform:translateY(-4px) scale(1.05);box-shadow:0 12px 35px rgba(102,126,234,0.5)}
    .ai-thinking{background:#f0f9ff;border:2px solid #3b82f6;border-radius:12px;padding:20px;margin:15px 0;text-align:center;display:none}
    .ai-result{background:#f0fdf4;border:2px solid #22c55e;border-radius:12px;padding:20px;margin:15px 0;display:none}
    .intent-banner{background:linear-gradient(90deg,#fbbf24,#f59e0b);color:white;padding:12px 20px;border-radius:12px;margin:15px 0;text-align:center;font-weight:700;display:none}
    .pill{display:inline-block;padding:8px 14px;border-radius:20px;margin:4px;font-size:0.9rem;font-weight:600;border:2px solid;transition:all 0.2s}
    .pill-ai{background:#dbeafe;color:#1e40af;border-color:#93c5fd}
    .pill-expert{background:#dcfce7;color:#166534;border-color:#86efac}
    .pill-premium{background:#fef3c7;color:#92400e;border-color:#fcd34d}
    .download-zone{display:flex;gap:15px;flex-wrap:wrap;justify-content:center;margin:20px 0}
    .btn-download{background:#059669;color:white;border:none;border-radius:25px;padding:12px 24px;font-weight:700;cursor:pointer;transition:all 0.3s}
    .btn-download:hover{background:#047857;transform:translateY(-2px)}
    .auto-stats{background:#f8fafc;border:1px solid #cbd5e1;border-radius:10px;padding:15px;margin:15px 0;text-align:center;color:#475569;font-weight:600}
    @media(max-width:768px){.container{padding:15px}.card{padding:18px;margin:15px 0}}
  </style>
</head>
<body>
  <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…ÙˆØ­Ø¯ -->
  <nav class="unified-nav" style="display:flex;gap:15px;flex-wrap:wrap;align-items:center;justify-content:center;padding:15px 10px;background:var(--gradient);border-radius:0 0 20px 20px;margin-bottom:20px">
    <a href="../" style="color:white;text-decoration:none;padding:8px 12px;border-radius:15px;transition:all 0.3s;font-weight:600"><i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="../alerts.html" style="color:white;text-decoration:none;padding:8px 12px;border-radius:15px;transition:all 0.3s;font-weight:600"><i class="fas fa-bell"></i> Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</a>
    <a href="../keyword-generator.html" style="color:white;text-decoration:none;padding:8px 12px;border-radius:15px;transition:all 0.3s;font-weight:600"><i class="fas fa-key"></i> Ø§Ù„ÙƒÙ„Ù…Ø§Øª</a>
    <a href="../tools-directory.html" style="color:white;text-decoration:none;padding:8px 12px;border-radius:15px;transition:all 0.3s;font-weight:600"><i class="fas fa-list"></i> Ø§Ù„Ø¯Ù„ÙŠÙ„</a>
  </nav>

  <div class="container">
    <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ -->
    <div class="card ai-card">
      <h1>ğŸ¤– Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠ</h1>
      <h2>ØªÙ„Ù‚Ø§Ø¦ÙŠ 100% â€¢ Ø§Ø­ØªØ±Ø§ÙÙŠ â€¢ Ø°ÙƒÙŠ</h2>
      <p style="font-size:1.1rem;opacity:0.95;margin:20px 0">ÙÙ‚Ø· Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ø¬Ø§Ù„ Ø£Ùˆ Ø§Ù„Ø®Ø¯Ù…Ø©ØŒ ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠÙÙ‡Ù… Ø§Ù„Ù†ÙŠØ© ÙˆÙŠÙˆÙ„Ø¯ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</p>
    </div>

    <!-- Ù…Ø¯Ø®Ù„ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· -->
    <div class="card">
      <input id="aiInput" class="input-simple" placeholder="Ø§ÙƒØªØ¨ Ù…Ø¬Ø§Ù„Ùƒ Ø£Ùˆ Ø®Ø¯Ù…ØªÙƒ... (Ù…Ø«Ø§Ù„: Ù…ÙŠØ¯ÙŠØ§ Ø¨Ø§ÙŠØ±ØŒ Ø¯ÙƒØªÙˆØ± Ù†Ø³Ø§ØŒ Ù†Ù‚Ù„ Ø§Ø«Ø§Ø«ØŒ Ù…Ø·Ø¹Ù…)" autocomplete="off" />
      <div style="text-align:center;margin-top:20px">
        <button id="aiGenerate" class="btn-ai">ğŸš€ ØªÙˆÙ„ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</button>
      </div>
      <div class="auto-stats" style="display:none" id="autoStatus">
        ğŸ¤– Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠØ¹Ù…Ù„... ÙŠØªÙ… ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ÙŠØ© ÙˆØ§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© ÙˆØ§Ù„Ù…Ù†ØµØ§Øª ÙˆØ§Ù„ÙƒÙ„Ù…Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
      </div>
    </div>

    <!-- Ø¨Ø§Ù†Ø± Ø§Ù„Ù†ÙŠØ© Ø§Ù„Ù…ÙƒØªØ´ÙØ© -->
    <div class="intent-banner" id="intentBanner"></div>

    <!-- Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ -->
    <div id="aiResults" style="display:none">
      <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ù…ÙˆÙ„Ø¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ -->
      <div class="card ai-result">
        <h2>ğŸ¯ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø§Ù„Ù…ÙˆÙ„Ø¯Ø©</h2>
        <div id="strategyContent"></div>
      </div>

      <!-- Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ© -->
      <div class="card">
        <h2>ğŸ”‘ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ© (Ù…ÙˆÙ„Ø¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)</h2>
        <div id="aiKeywords"></div>
        <div class="auto-stats" id="keywordStats"></div>
      </div>

      <!-- Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø³Ù„Ø¨ÙŠØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© -->
      <div class="card" id="negativeSection" style="display:none">
        <h2>ğŸš« Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø³Ù„Ø¨ÙŠØ© (ØªÙ„Ù‚Ø§Ø¦ÙŠØ©)</h2>
        <div id="aiNegatives"></div>
      </div>

      <!-- Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© ÙˆØ§Ù„ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© -->
      <div class="card">
        <h2>ğŸ’° Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙˆØ§Ù„ØªÙˆÙ‚Ø¹Ø§Øª</h2>
        <div id="autoForecasts"></div>
      </div>

      <!-- Ø§Ù„ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ -->
      <div class="card">
        <h2>ğŸ“¥ Ø§Ù„ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</h2>
        <div class="download-zone">
          <button id="autoExportXLSX" class="btn-download">ğŸ“Š XLSX Ù…ØªÙ‚Ø¯Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠ</button>
          <button id="autoExportProfile" class="btn-download">ğŸ‘¤ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ø¬Ø§Ù„</button>
          <button id="autoExportAll" class="btn-download">ğŸ“¦ ØªØµØ¯ÙŠØ± Ø´Ø§Ù…Ù„</button>
        </div>
        <p style="text-align:center;color:#6b7280;font-size:0.9rem;margin-top:15px">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ù…ÙˆÙ„Ø¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¯ÙˆÙ† ØªØ¯Ø®Ù„ ÙŠØ¯ÙˆÙŠ â€¢ Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© â€¢ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ù…Ø­ØªØ±ÙØ©</p>
      </div>
    </div>
  </div>

  <!-- Ø§Ù„ÙÙˆØªØ± Ø§Ù„Ù…ÙˆØ­Ø¯ -->
  <footer style="background:var(--gradient);color:white;margin-top:40px;padding:25px 15px;text-align:center;border-radius:20px 20px 0 0">
    <div style="display:flex;gap:15px;flex-wrap:wrap;justify-content:center;margin-bottom:15px">
      <a href="../about.html" style="color:white;text-decoration:none;padding:8px 12px;border-radius:10px;transition:all 0.3s">Ø¹Ù† Ø§Ù„Ø£Ø¯ÙˆØ§Øª</a>
      <a href="../tools-directory.html" style="color:white;text-decoration:none;padding:8px 12px;border-radius:10px;transition:all 0.3s">Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Øª</a>
      <a href="https://arabsad.com" target="_blank" rel="noopener noreferrer" style="color:white;text-decoration:none;padding:8px 12px;border-radius:10px;transition:all 0.3s">Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø³Ù…ÙŠ</a>
    </div>
    <small style="opacity:0.9">Â© 2025 Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠ - ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</small>
  </footer>

  <script src="../assets/js/xlsx.full.min.js"></script>
  <script>
    // ØªØ£Ù…ÙŠÙ† XLSX
    (function ensureXLSX(){
      if (!window.XLSX || !XLSX.utils || typeof XLSX.writeFile !== 'function') {
        console.warn('Ø§Ø³ØªØ®Ø¯Ø§Ù… CDN ÙƒØ¨Ø¯ÙŠÙ„...');
        var s = document.createElement('script');
        s.src = 'https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js';
        s.async = true;
        document.head.appendChild(s);
      }
    })();

    // Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©
    let AI_PROFILES = {};
    let INTENT_PATTERNS = {};
    let SEASONAL_DATA = {};
    let MARKET_DATA = {};

    // ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
    async function loadAIDatabase() {
      try {
        const [profiles, intents, seasonal, market] = await Promise.all([
          fetch('../data/smart-profiles.json?t=' + Date.now()).then(r => r.json()).catch(() => ({})),
          fetch('../data/intent-ai.json?t=' + Date.now()).then(r => r.json()).catch(() => ({})),
          fetch('../data/seasonal-trends.json?t=' + Date.now()).then(r => r.json()).catch(() => ({})),
          fetch('../data/market-intelligence.json?t=' + Date.now()).then(r => r.json()).catch(() => ({}))
        ]);
        
        AI_PROFILES = profiles.profiles || {};
        INTENT_PATTERNS = intents.intent_patterns || {};
        SEASONAL_DATA = seasonal || {};
        MARKET_DATA = market || {};
        
        console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„');
      } catch (error) {
        console.warn('âš ï¸ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:', error);
        initializeFallbackData();
      }
    }

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø°ÙƒÙŠØ©
    function initializeFallbackData() {
      AI_PROFILES = {
        "Ù…ÙŠØ¯ÙŠØ§_Ø¨Ø§ÙŠØ±": {
          "official_name": "Ù…Ø®ØªØµ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù…Ù…ÙˆÙ„Ø© ÙˆÙ…Ø¯ÙŠØ± Ø­Ù…Ù„Ø§Øª",
          "synonyms": {"generic": ["Ù…ÙŠØ¯ÙŠØ§ Ø¨Ø§ÙŠØ±", "Ù…Ø¯ÙŠØ± Ø­Ù…Ù„Ø§Øª", "Ø§Ø¯Ø³ Ø¨Ø§ÙŠØ±", "Ù…Ø´ØªØ±ÙŠ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª"]},
          "smart_queries": {
            "service_intent": [
              "Ø§Ø¯Ø§Ø±Ø© Ø­Ù…Ù„Ø§Øª Ø§Ø¹Ù„Ø§Ù†ÙŠØ© Ù…Ù…ÙˆÙ„Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ©",
              "Ø®Ø¯Ù…Ø§Øª Google Ads Ù„Ø²ÙŠØ§Ø¯Ø© ROAS",
              "Ø§Ø¯Ø§Ø±Ø© Facebook ÙˆInstagram Ads",
              "ØªØ­Ø³ÙŠÙ† Ø­Ù…Ù„Ø§Øª TikTok Ù„Ù„Ø´Ø±ÙƒØ§Øª",
              "Ø®Ø¯Ù…Ø§Øª YouTube Ads",
              "ØªØ­Ø³ÙŠÙ† ROAS ÙˆØ§Ù„Ø¹Ø§Ø¦Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±",
              "Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø¬Ù…Ù‡ÙˆØ± Ø¯Ù‚ÙŠÙ‚ ÙˆÙ…ØªÙ‚Ø¯Ù…",
              "ØªØµÙ…ÙŠÙ… Ø§Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ©",
              "ØªØªØ¨Ø¹ ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø­Ù…Ù„Ø§Øª",
              "Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ø§Ø¹Ù„Ø§Ù† Ø§Ù„Ù…Ø¯ÙÙˆØ¹"
            ]
          },
          "platform_strategies": {
            "Google Ads": {"type": "Search + Performance Max", "reason": "Ù†ÙŠØ© Ø¨Ø­Ø« Ø¹Ø§Ù„ÙŠØ© + ØªØºØ·ÙŠØ© Ø´Ø§Ù…Ù„Ø©"},
            "Facebook": {"type": "Lead Generation + Advantage+", "reason": "ØªÙˆÙ„ÙŠØ¯ Ø¹Ù…Ù„Ø§Ø¡ Ù…Ø­ØªÙ…Ù„ÙŠÙ†"},
            "Instagram": {"type": "Reels + Stories", "reason": "Ù…Ø­ØªÙˆÙ‰ Ø¨ØµØ±ÙŠ Ø¬Ø°Ø§Ø¨"},
            "TikTok": {"type": "Video Ads", "reason": "ÙˆØµÙˆÙ„ Ù„Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯"},
            "YouTube": {"type": "In-Stream", "reason": "Ø´Ø±Ø­ ÙˆØªÙˆØ¹ÙŠØ©"},
            "LinkedIn": {"type": "Sponsored Content", "reason": "Ø§Ø³ØªÙ‡Ø¯Ø§Ù B2B"}
          }
        },
        "Ø¯ÙƒØªÙˆØ±_Ù†Ø³Ø§Ø¡": {
          "official_name": "Ø·Ø¨ÙŠØ¨ Ù†Ø³Ø§Ø¡ ÙˆØªÙˆÙ„ÙŠØ¯",
          "synonyms": {"generic": ["Ø¯ÙƒØªÙˆØ± Ù†Ø³Ø§", "Ø·Ø¨ÙŠØ¨ Ù†Ø³Ø§Ø¡", "Ø¯ÙƒØªÙˆØ± ÙˆÙ„Ø§Ø¯Ø©"]},
          "smart_queries": {
            "service_intent": [
              "Ø§ÙØ¶Ù„ Ø¯ÙƒØªÙˆØ± Ù†Ø³Ø§Ø¡ ÙˆØªÙˆÙ„ÙŠØ¯ Ù‚Ø±ÙŠØ¨ Ù…Ù†ÙŠ",
              "Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯ Ø¯ÙƒØªÙˆØ± Ù†Ø³Ø§",
              "Ø§Ø³Ø¹Ø§Ø± Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­Ù…Ù„ Ø§Ù„ÙƒØ§Ù…Ù„Ø©",
              "Ø¯ÙƒØªÙˆØ± ÙˆÙ„Ø§Ø¯Ø© 24 Ø³Ø§Ø¹Ø© Ù„Ù„Ø·ÙˆØ§Ø±Ø¦",
              "Ø¹ÙŠØ§Ø¯Ø© Ù†Ø³Ø§Ø¡ ÙˆØªÙˆÙ„ÙŠØ¯ Ø¨Ø§Ù„ØªØ£Ù…ÙŠÙ†",
              "ÙØ­Øµ Ø§Ù„Ù…ÙˆØ¬Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© 4D",
              "Ø¹Ù„Ø§Ø¬ ØªØ£Ø®Ø± Ø§Ù„Ø­Ù…Ù„ ÙˆØ§Ù„Ø§Ù†Ø¬Ø§Ø¨",
              "Ù…Ù†Ø¸Ø§Ø± Ø±Ø­Ù…ÙŠ ØªØ´Ø®ÙŠØµÙŠ",
              "Ù…ØªØ§Ø¨Ø¹Ø© ØµØ­Ø© Ø§Ù„Ù…Ø±Ø£Ø© Ø§Ù„Ø§Ù†Ø¬Ø§Ø¨ÙŠØ©",
              "Ø±Ø¹Ø§ÙŠØ© Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©"
            ]
          }
        }
      };
      
      INTENT_PATTERNS = {
        "service_seeking": {
          "keywords": ["Ø§Ø³Ø¹Ø§Ø±", "ØªÙƒÙ„ÙØ©", "Ø§ÙØ¶Ù„", "Ù‚Ø±ÙŠØ¨ Ù…Ù†ÙŠ", "Ø­Ø¬Ø²", "Ø·Ù„Ø¨", "Ø±Ù‚Ù…", "Ù…ÙˆØ¹Ø¯"],
          "templates": ["{quality} {field} {location}", "Ø§Ø³Ø¹Ø§Ø± {service}", "Ø­Ø¬Ø² {service} {timing}"]
        },
        "business_seeking": {
          "keywords": ["Ù…Ø¯ÙŠØ±", "Ø®Ø¨ÙŠØ±", "Ø§Ø³ØªØ´Ø§Ø±ÙŠ", "Ù…Ø­ØªØ±Ù", "Ù…Ø³ØªÙ‚Ù„", "ÙˆÙƒØ§Ù„Ø©", "Ø´Ø±ÙƒØ© Ù…ØªØ®ØµØµØ©"],
          "templates": ["Ù…Ø¯ÙŠØ± {field} Ù…Ø­ØªØ±Ù", "{field} Ù…Ø³ØªÙ‚Ù„", "ÙˆÙƒØ§Ù„Ø© {field}", "Ø®Ø¨ÙŠØ± {specialization}"]
        }
      };
    }

    // Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ÙŠØ©
    function analyzeIntent(input) {
      const normalized = input.toLowerCase().trim();
      
      // ÙƒØ´Ù Ø§Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
      let detectedField = null;
      let profile = null;
      
      // ÙƒØ´Ù Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„Ø§Øª
      Object.entries(AI_PROFILES).forEach(([key, data]) => {
        if (data.synonyms && data.synonyms.generic) {
          data.synonyms.generic.forEach(synonym => {
            if (normalized.includes(synonym.toLowerCase())) {
              detectedField = data.official_name;
              profile = data;
            }
          });
        }
      });
      
      // ÙƒØ´Ù Ø¨Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±Ø§Ø¯ÙØ©
      if (!detectedField) {
        if (/Ù…ÙŠØ¯ÙŠØ§|Ø§Ø¹Ù„Ø§Ù†|Ù…Ù…ÙˆÙ„|Ø­Ù…Ù„Ø§Øª|Ø§Ø¯Ø³|ads|media/.test(normalized)) {
          detectedField = "Ù…Ø®ØªØµ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù…Ù…ÙˆÙ„Ø© ÙˆÙ…Ø¯ÙŠØ± Ø­Ù…Ù„Ø§Øª";
          profile = AI_PROFILES["Ù…ÙŠØ¯ÙŠØ§_Ø¨Ø§ÙŠØ±"];
        }
        else if (/Ø¯ÙƒØªÙˆØ±|Ø·Ø¨ÙŠØ¨|Ù†Ø³Ø§|ÙˆÙ„Ø§Ø¯Ø©|Ù†Ø³Ø§Ø¡/.test(normalized)) {
          detectedField = "Ø·Ø¨ÙŠØ¨ Ù†Ø³Ø§Ø¡ ÙˆØªÙˆÙ„ÙŠØ¯";
          profile = AI_PROFILES["Ø¯ÙƒØªÙˆØ±_Ù†Ø³Ø§Ø¡"];
        }
        else if (/Ù†Ù‚Ù„|Ø§Ø«Ø§Ø«|Ø¹ÙØ´|ØªØ±Ø­ÙŠÙ„/.test(normalized)) {
          detectedField = "Ø´Ø±ÙƒØ© Ù†Ù‚Ù„ Ø£Ø«Ø§Ø«";
          profile = {
            "smart_queries": {
              "service_intent": [
                "Ø§Ø³Ø¹Ø§Ø± Ù†Ù‚Ù„ Ø¹ÙØ´ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶",
                "Ø§ÙØ¶Ù„ Ø´Ø±ÙƒØ© Ù†Ù‚Ù„ Ø§Ø«Ø§Ø« Ù…Ø¹ Ø§Ù„ØªØ£Ù…ÙŠÙ†",
                "Ø±Ø§ÙØ¹Ø© Ù†Ù‚Ù„ Ø§Ø«Ø§Ø« Ù„Ù„Ø·ÙˆØ§Ø¨Ù‚ Ø§Ù„Ø¹Ø§Ù„ÙŠØ©", 
                "Ù†Ù‚Ù„ Ø¹ÙØ´ ÙÙˆØ±ÙŠ Ù†ÙØ³ Ø§Ù„ÙŠÙˆÙ…",
                "ØªØºÙ„ÙŠÙ Ø§Ø«Ø§Ø« Ø§Ø­ØªØ±Ø§ÙÙŠ",
                "Ø´Ø±ÙƒØ© Ù†Ù‚Ù„ Ø§Ø«Ø§Ø« Ù…Ø¶Ù…ÙˆÙ†Ø©",
                "ØªØ®Ø²ÙŠÙ† Ø§Ø«Ø§Ø« Ù…Ø¤Ù‚Øª ÙˆØ¢Ù…Ù†",
                "ÙÙƒ ÙˆØªØ±ÙƒÙŠØ¨ Ø§Ù„Ø§Ø«Ø§Ø« Ø§Ù„Ù…Ø¹Ù‚Ø¯"
              ]
            }
          };
        }
      }
      
      // ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ù†ÙŠØ©
      let intentType = "service_seeking"; // Ø§ÙØªØ±Ø§Ø¶ÙŠ
      if (/Ù…Ø¯ÙŠØ±|Ø®Ø¨ÙŠØ±|Ù…Ø­ØªØ±Ù|Ù…Ø³ØªÙ‚Ù„|ÙˆÙƒØ§Ù„Ø©|ØªÙˆØ¸ÙŠÙ/.test(normalized)) {
        intentType = "business_seeking";
      }
      
      return {
        field: detectedField || input,
        profile: profile,
        intent: intentType,
        confidence: detectedField ? 0.95 : 0.7
      };
    }

    // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆÙ„Ø© ÙˆØ§Ù„Ù…Ù†ØµØ§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
    function autoSelectCountryAndPlatforms(field) {
      // Ø§Ø®ØªÙŠØ§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø¯ÙˆÙ„Ø© (Ø­Ø³Ø¨ IP Ø£Ùˆ Ø§ÙØªØ±Ø§Ø¶ÙŠ)
      const autoCountry = "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©"; // ÙŠÙ…ÙƒÙ† ØªØ­Ø³ÙŠÙ†Ù‡ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ø¨Ù€ IP detection
      
      // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù†ØµØ§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¬Ø§Ù„
      let autoPlatforms = ["Google Ads", "Facebook", "Instagram"];
      
      if (field.includes("Ù…ÙŠØ¯ÙŠØ§ Ø¨Ø§ÙŠØ±") || field.includes("Ø§Ø¹Ù„Ø§Ù†Ø§Øª")) {
        autoPlatforms = ["Google Ads", "Facebook", "Instagram", "TikTok", "YouTube"];
      } else if (field.includes("Ø¯ÙƒØªÙˆØ±") || field.includes("Ø·Ø¨ÙŠØ¨")) {
        autoPlatforms = ["Google Ads", "Facebook", "YouTube"];
      } else if (field.includes("Ù…Ø·Ø¹Ù…") || field.includes("ÙƒØ§ÙÙŠÙ‡")) {
        autoPlatforms = ["Google Ads", "Instagram", "TikTok"];
      }
      
      return { country: autoCountry, platforms: autoPlatforms };
    }

    // ØªÙˆÙ„ÙŠØ¯ Ù…ÙŠØ²Ø§Ù†ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø°ÙƒÙŠØ©
    function autoGenerateBudget(field, country) {
      const budgetRanges = {
        "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©": { min: 1000, med: 3000, high: 8000 },
        "Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª": { min: 1200, med: 3500, high: 9000 },
        "Ù…ØµØ±": { min: 500, med: 1500, high: 4000 }
      };
      
      const range = budgetRanges[country] || budgetRanges["Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©"];
      
      // Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¬Ø§Ù„
      if (field.includes("Ù…ÙŠØ¯ÙŠØ§ Ø¨Ø§ÙŠØ±") || field.includes("Ø§Ø¹Ù„Ø§Ù†Ø§Øª")) {
        return range.high; // Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø¹Ø§Ù„ÙŠØ© Ù„Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©
      } else if (field.includes("Ø¯ÙƒØªÙˆØ±") || field.includes("Ø·Ø¨ÙŠØ¨")) {
        return range.med; // Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ù…ØªÙˆØ³Ø·Ø© Ù„Ù„Ø¹ÙŠØ§Ø¯Ø§Øª
      } else {
        return range.med; // Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ù…ØªÙˆØ³Ø·Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
      }
    }

    // Ø§Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø§Ù„Ø°ÙƒÙŠ
    async function generateAIContent(input) {
      document.getElementById('autoStatus').style.display = 'block';
      
      // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ÙŠØ©
      const analysis = analyzeIntent(input);
      const autoSelection = autoSelectCountryAndPlatforms(analysis.field);
      const autoBudget = autoGenerateBudget(analysis.field, autoSelection.country);
      
      // Ø¹Ø±Ø¶ Ø§Ù„Ù†ÙŠØ© Ø§Ù„Ù…ÙƒØªØ´ÙØ©
      const intentBanner = document.getElementById('intentBanner');
      intentBanner.innerHTML = `ğŸ¯ ØªÙ… Ø§ÙƒØªØ´Ø§Ù: <strong>${analysis.field}</strong> â€¢ Ø§Ù„Ù†ÙŠØ©: <strong>${analysis.intent === 'service_seeking' ? 'Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©' : 'Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¨ÙŠØ±'}</strong> â€¢ Ø§Ù„Ø¯ÙˆÙ„Ø©: <strong>${autoSelection.country}</strong> â€¢ Ø§Ù„Ø«Ù‚Ø©: <strong>${Math.round(analysis.confidence*100)}%</strong>`;
      intentBanner.style.display = 'block';
      
      // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©
      let smartKeywords = [];
      if (analysis.profile && analysis.profile.smart_queries) {
        const intentQueries = analysis.profile.smart_queries[analysis.intent + '_intent'] || 
                             analysis.profile.smart_queries['service_intent'] || 
                             [];
        smartKeywords = [...intentQueries];
      }
      
      // Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨
      if (INTENT_PATTERNS[analysis.intent]) {
        const templates = INTENT_PATTERNS[analysis.intent].templates || [];
        templates.forEach(template => {
          const generated = template
            .replace('{field}', analysis.field)
            .replace('{service}', analysis.field)
            .replace('{quality}', 'Ø§ÙØ¶Ù„')
            .replace('{location}', 'Ù‚Ø±ÙŠØ¨ Ù…Ù†ÙŠ');
          if (!smartKeywords.includes(generated)) {
            smartKeywords.push(generated);
          }
        });
      }
      
      // Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø§Øª Ø¬ØºØ±Ø§ÙÙŠØ©
      const cities = ["Ø§Ù„Ø±ÙŠØ§Ø¶", "Ø¬Ø¯Ø©", "Ø§Ù„Ø¯Ù…Ø§Ù…", "Ø¯Ø¨ÙŠ", "Ø£Ø¨ÙˆØ¸Ø¨ÙŠ", "Ø§Ù„ÙƒÙˆÙŠØª", "Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©"];
      cities.slice(0, 3).forEach(city => {
        smartKeywords.push(`${analysis.field} ÙÙŠ ${city}`);
        smartKeywords.push(`Ø§ÙØ¶Ù„ ${analysis.field} ${city}`);
      });
      
      // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙƒØ±Ø§Ø± ÙˆØªØ±ØªÙŠØ¨
      smartKeywords = [...new Set(smartKeywords)].slice(0, 50);
      
      setTimeout(() => {
        // Ø¹Ø±Ø¶ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©
        const strategyContent = document.getElementById('strategyContent');
        strategyContent.innerHTML = `
          <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px">
            <div style="background:#f0f9ff;padding:15px;border-radius:10px;border-left:4px solid #3b82f6">
              <strong>ğŸ¯ Ø§Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„Ù…ÙƒØªØ´Ù</strong><br>${analysis.field}
            </div>
            <div style="background:#f0fdf4;padding:15px;border-radius:10px;border-left:4px solid #22c55e">
              <strong>ğŸŒ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©</strong><br>${autoSelection.country}
            </div>
            <div style="background:#fef3c7;padding:15px;border-radius:10px;border-left:4px solid #f59e0b">
              <strong>ğŸ’° Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©</strong><br>${autoBudget} Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ
            </div>
            <div style="background:#fdf2f8;padding:15px;border-radius:10px;border-left:4px solid #ec4899">
              <strong>ğŸ“± Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©</strong><br>${autoSelection.platforms.join(' â€¢ ')}
            </div>
          </div>
          <div style="margin-top:20px;padding:15px;background:#f8fafc;border-radius:10px">
            <strong>ğŸ¤– Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©:</strong> ØªÙ… ØªØ­Ù„ÙŠÙ„ "${input}" ÙˆØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø£Ù…Ø«Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¬Ø§Ù„ ÙˆØ§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù ÙˆØ§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ø£ÙƒØ«Ø± ÙØ¹Ø§Ù„ÙŠØ©.
          </div>
        `;
        
        // Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„Ù…Ø§Øª
        const keywordsDiv = document.getElementById('aiKeywords');
        keywordsDiv.innerHTML = '<div style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center"></div>';
        const container = keywordsDiv.firstElementChild;
        
        smartKeywords.forEach((keyword, i) => {
          const pill = document.createElement('span');
          pill.textContent = keyword;
          pill.className = i < 15 ? 'pill pill-ai' : i < 30 ? 'pill pill-expert' : 'pill pill-premium';
          container.appendChild(pill);
        });
        
        document.getElementById('keywordStats').innerHTML = `
          ğŸ¤– <strong>${smartKeywords.length}</strong> ÙƒÙ„Ù…Ø© Ø°ÙƒÙŠØ© Ù…ÙˆÙ„Ø¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ â€¢ 
          ğŸ¯ Ù†ÙŠØ©: <strong>${analysis.intent === 'service_seeking' ? 'Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©' : 'Ø¨Ø­Ø« Ø®Ø¨ÙŠØ±'}</strong> â€¢ 
          âš¡ Ø«Ù‚Ø©: <strong>${Math.round(analysis.confidence*100)}%</strong>
        `;
        
        // Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø³Ù„Ø¨ÙŠØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
        const autoNegatives = ["ÙˆØ¸Ø§Ø¦Ù", "Ù…Ø¬Ø§Ù†ÙŠ", "ØªØ¹Ù„ÙŠÙ…", "Ø¯ÙˆØ±Ø§Øª", "ØµÙˆØ±", "ÙÙŠØ¯ÙŠÙˆ", "ØªØ·Ø¨ÙŠÙ‚Ø§Øª", "Ø¨Ø±Ø§Ù…Ø¬"];
        if (analysis.field.includes("Ù…ÙŠØ¯ÙŠØ§ Ø¨Ø§ÙŠØ±")) {
          autoNegatives.push(...["ÙˆØ¸Ø§Ø¦Ù Ù…ÙŠØ¯ÙŠØ§", "ØªØ¹Ù„ÙŠÙ… Ø§Ø¹Ù„Ø§Ù†Ø§Øª", "Ø¯ÙˆØ±Ø§Øª Ù…Ø¬Ø§Ù†ÙŠØ©", "Ø§Ø¹Ù„Ø§Ù†Ø§Øª Ù…Ø¬Ø§Ù†ÙŠØ©"]);
        }
        
        const negativesDiv = document.getElementById('aiNegatives');
        negativesDiv.innerHTML = '<div style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center"></div>';
        const negContainer = negativesDiv.firstElementChild;
        
        autoNegatives.forEach(neg => {
          const pill = document.createElement('span');
          pill.textContent = `-${neg}`;
          pill.className = 'pill';
          pill.style.background = '#fee2e2';
          pill.style.color = '#991b1b';
          pill.style.borderColor = '#fca5a5';
          negContainer.appendChild(pill);
        });
        
        document.getElementById('negativeSection').style.display = 'block';
        
        // Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
        const forecastsDiv = document.getElementById('autoForecasts');
        forecastsDiv.innerHTML = `
          <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;text-align:center">
            <div style="background:#f0f9ff;padding:20px;border-radius:12px">
              <div style="font-size:1.5rem;font-weight:800;color:#1e40af">${Math.round(autoBudget/autoSelection.platforms.length)}</div>
              <div style="color:#64748b">Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ù„ÙƒÙ„ Ù…Ù†ØµØ©</div>
            </div>
            <div style="background:#f0fdf4;padding:20px;border-radius:12px">
              <div style="font-size:1.5rem;font-weight:800;color:#166534">${Math.round(autoBudget * 15)}</div>
              <div style="color:#64748b">Ø¸Ù‡ÙˆØ± Ù…ØªÙˆÙ‚Ø¹ Ø´Ù‡Ø±ÙŠ</div>
            </div>
            <div style="background:#fef3c7;padding:20px;border-radius:12px">
              <div style="font-size:1.5rem;font-weight:800;color:#92400e">${Math.round(autoBudget * 0.8)}</div>
              <div style="color:#64748b">Ù†Ù‚Ø±Ø§Øª Ù…ØªÙˆÙ‚Ø¹Ø©</div>
            </div>
            <div style="background:#fdf2f8;padding:20px;border-radius:12px">
              <div style="font-size:1.5rem;font-weight:800;color:#be185d">${Math.round(autoBudget * 0.05)}</div>
              <div style="color:#64748b">ØªØ­ÙˆÙŠÙ„Ø§Øª Ù…ØªÙˆÙ‚Ø¹Ø©</div>
            </div>
          </div>
          <div style="margin-top:20px;text-align:center;color:#6b7280">
            ğŸ“Š Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª Ù…Ø­Ø³ÙˆØ¨Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø³ÙˆÙ‚ ÙˆØ·Ø¨ÙŠØ¹Ø© Ø§Ù„Ù…Ø¬Ø§Ù„
          </div>
        `;
        
        // ØªÙØ¹ÙŠÙ„ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµØ¯ÙŠØ±
        document.getElementById('autoExportXLSX').onclick = () => exportAutoXLSX(analysis, smartKeywords, autoNegatives, autoBudget, autoSelection);
        document.getElementById('autoExportProfile').onclick = () => exportProfile(analysis, smartKeywords);
        document.getElementById('autoExportAll').onclick = () => exportAllFormats(analysis, smartKeywords, autoNegatives, autoBudget, autoSelection);
        
        document.getElementById('aiResults').style.display = 'block';
        document.getElementById('autoStatus').style.display = 'none';
        
        // ØªÙ…Ø±ÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù†ØªØ§Ø¦Ø¬
        document.getElementById('aiResults').scrollIntoView({behavior: 'smooth'});
        
      }, 2000); // Ù…Ø­Ø§ÙƒØ§Ø© "ØªÙÙƒÙŠØ±" Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
    }

    // ØªØµØ¯ÙŠØ± XLSX ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…ØªÙ‚Ø¯Ù…
    function exportAutoXLSX(analysis, keywords, negatives, budget, selection) {
      if (!window.XLSX) {
        exportAutoCSV(keywords, negatives, analysis.field);
        return;
      }
      
      try {
        const wb = XLSX.utils.book_new();
        const now = new Date();
        
        // ÙˆØ±Ù‚Ø© Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        const summaryData = [
          ['ğŸ¤– ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠ', ''],
          ['', ''],
          ['Ø§Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„Ù…ÙƒØªØ´Ù', analysis.field],
          ['Ù†ÙˆØ¹ Ø§Ù„Ù†ÙŠØ©', analysis.intent === 'service_seeking' ? 'Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©' : 'Ø¨Ø­Ø« Ø®Ø¨ÙŠØ±'],
          ['Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ù‚Ø©', `${Math.round(analysis.confidence*100)}%`],
          ['Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©', selection.country],
          ['Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©', `${budget} Ø±ÙŠØ§Ù„`],
          ['Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹', selection.platforms.join(' â€¢ ')],
          ['ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙˆÙ„ÙŠØ¯', now.toLocaleDateString('ar-SA')],
          ['ÙˆÙ‚Øª Ø§Ù„ØªÙˆÙ„ÙŠØ¯', now.toLocaleTimeString('ar-SA')],
          ['', ''],
          ['ğŸ¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©:', ''],
          ['Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©', keywords.length],
          ['Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø³Ù„Ø¨ÙŠØ©', negatives.length],
          ['Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙˆÙ„ÙŠØ¯', 'Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ 100%'],
          ['', ''],
          ['ğŸ“Š Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:', ''],
          ['Ø§Ù„Ø¸Ù‡ÙˆØ± Ø§Ù„Ø´Ù‡Ø±ÙŠ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹', Math.round(budget * 15).toLocaleString()],
          ['Ø§Ù„Ù†Ù‚Ø±Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©', Math.round(budget * 0.8).toLocaleString()],
          ['Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©', Math.round(budget * 0.05).toLocaleString()],
          ['ROAS Ø§Ù„Ù…ØªÙˆÙ‚Ø¹', '3.2x - 5.8x']
        ];
        
        const wsSummary = XLSX.utils.aoa_to_sheet(summaryData);
        XLSX.utils.book_append_sheet(wb, wsSummary, 'ğŸ¤– Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ');
        
        // ÙˆØ±Ù‚Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©
        const keywordRows = [['Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø°ÙƒÙŠØ©', 'Ù†ÙˆØ¹ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø©', 'Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©', 'CPC Ø§Ù„Ù…ØªÙˆÙ‚Ø¹', 'Ø§Ù„Ù‡Ø¯Ù']];
        keywords.forEach((kw, i) => {
          const priority = i < 15 ? 'Ø¹Ø§Ù„ÙŠØ©' : i < 30 ? 'Ù…ØªÙˆØ³Ø·Ø©' : 'Ù…Ù†Ø®ÙØ¶Ø©';
          const cpc = (2 + Math.random() * 3).toFixed(2);
          const goal = analysis.intent === 'service_seeking' ? 'Ø·Ù„Ø¨Ø§Øª/Ù…Ø¨ÙŠØ¹Ø§Øª' : 'ØªÙˆÙ„ÙŠØ¯ Ø¹Ù…Ù„Ø§Ø¡';
          keywordRows.push([kw, 'Ù…Ø·Ø§Ø¨Ù‚Ø© Ø°ÙƒÙŠØ©', priority, `$${cpc}`, goal]);
        });
        
        const wsKeywords = XLSX.utils.aoa_to_sheet(keywordRows);
        XLSX.utils.book_append_sheet(wb, wsKeywords, 'ğŸ”‘ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©');
        
        // ÙˆØ±Ù‚Ø© Ø§Ù„Ø³Ù„Ø¨ÙŠØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
        const negativeRows = [['Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ù„Ø¨ÙŠØ©', 'Ø³Ø¨Ø¨ Ø§Ù„Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ', 'Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©']];
        negatives.forEach(neg => {
          negativeRows.push([neg, 'ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù‡Ø¯Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹', 'Ø¹Ø§Ù„ÙŠØ©']);
        });
        const wsNegatives = XLSX.utils.aoa_to_sheet(negativeRows);
        XLSX.utils.book_append_sheet(wb, wsNegatives, 'ğŸš« Ø§Ù„Ø³Ù„Ø¨ÙŠØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©');
        
        // ÙˆØ±Ù‚Ø© Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
        const strategyRows = [['Ø§Ù„Ù…Ù†ØµØ©', 'Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ù…Ù‚ØªØ±Ø­', 'Ø§Ù„Ù‡Ø¯Ù Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ', 'KPI Ø±Ø¦ÙŠØ³ÙŠ', 'Ø³Ø¨Ø¨ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø°ÙƒÙŠ']];
        selection.platforms.forEach(platform => {
          let adType = 'Ø¥Ø¹Ù„Ø§Ù† Ø¹Ø§Ù…', goal = 'Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ¹ÙŠ', kpi = 'CPM', reason = 'Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù…Ø¬Ø§Ù„';
          
          if (platform === 'Google Ads') {
            adType = analysis.intent === 'service_seeking' ? 'Ø¨Ø­Ø« Ù…Ø­Ù„ÙŠ + Ø®Ø±Ø§Ø¦Ø·' : 'Ø¨Ø­Ø« + Ø´Ø¨ÙƒØ© Ø§Ù„Ø¹Ø±Ø¶';
            goal = 'ØªØ­ÙˆÙŠÙ„Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø©';
            kpi = 'CPA';
            reason = 'Ù†ÙŠØ© Ø¨Ø­Ø« Ø¹Ø§Ù„ÙŠØ©';
          } else if (platform === 'Facebook') {
            adType = 'Lead Generation + Catalog';
            goal = 'ØªÙˆÙ„ÙŠØ¯ Ø¹Ù…Ù„Ø§Ø¡ Ù…Ø­ØªÙ…Ù„ÙŠÙ†';
            kpi = 'CPL';
            reason = 'Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø¯Ù‚ÙŠÙ‚ ÙˆÙˆØµÙˆÙ„ ÙˆØ§Ø³Ø¹';
          } else if (platform === 'Instagram') {
            adType = 'Reels + Stories';
            goal = 'Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ¹ÙŠ ÙˆØ§Ù„ØªÙØ§Ø¹Ù„';
            kpi = 'CPM + CTR';
            reason = 'Ù…Ø­ØªÙˆÙ‰ Ø¨ØµØ±ÙŠ Ø¬Ø°Ø§Ø¨';
          } else if (platform === 'TikTok') {
            adType = 'Short Video Ads';
            goal = 'Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯';
            kpi = 'CPV';
            reason = 'ÙÙŠØ±Ø§Ù„ÙŠØ© Ø¹Ø§Ù„ÙŠØ©';
          } else if (platform === 'YouTube') {
            adType = 'In-Stream + Discovery';
            goal = 'Ø´Ø±Ø­ ÙˆØªÙˆØ¹ÙŠØ©';
            kpi = 'CPV + VTR';
            reason = 'Ù…Ø­ØªÙˆÙ‰ ØªØ¹Ù„ÙŠÙ…ÙŠ Ø·ÙˆÙŠÙ„';
          }
          
          strategyRows.push([platform, adType, goal, kpi, reason]);
        });
        
        const wsStrategy = XLSX.utils.aoa_to_sheet(strategyRows);
        XLSX.utils.book_append_sheet(wb, wsStrategy, 'ğŸ“Š Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©');
        
        // ÙˆØ±Ù‚Ø© Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ø¬Ø§Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
        if (analysis.profile) {
          const profileRows = [
            ['ğŸ¯ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ø¬Ø§Ù„', ''],
            ['', ''],
            ['Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø³Ù…ÙŠ', analysis.field],
            ['Ø§Ù„Ù…Ø±Ø§Ø¯ÙØ§Øª', (analysis.profile.synonyms?.generic || []).join(' â€¢ ')],
            ['Ø§Ù„ØªØ®ØµØµØ§Øª', (analysis.profile.specializations || []).slice(0,5).join(' â€¢ ')],
            ['Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©', (analysis.profile.core_services || []).slice(0,5).join(' â€¢ ')],
            ['Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù', (analysis.profile.target_clients || []).slice(0,3).join(' â€¢ ')],
            ['Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø³Ù„Ø¨ÙŠØ© Ø§Ù„Ù…Ø®ØµØµØ©', (analysis.profile.negative_keywords || []).join(' â€¢ ')],
            ['', ''],
            ['ğŸ“± Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ù…Ù†ØµØ§Øª:', ''],
            ...Object.entries(analysis.profile.platform_strategies || {}).map(([platform, strategy]) => 
              [platform, `${strategy.type} (${strategy.reason})`]
            )
          ];
          
          const wsProfile = XLSX.utils.aoa_to_sheet(profileRows);
          XLSX.utils.book_append_sheet(wb, wsProfile, 'ğŸ‘¤ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ø¬Ø§Ù„');
        }
        
        const fileName = `AI-${analysis.field.replace(/\s+/g,'-')}-${Date.now()}.xlsx`;
        XLSX.writeFile(wb, fileName);
        
        alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ù…Ù„Ù XLSX Ø°ÙƒÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„!');
        
      } catch (error) {
        console.error('Ø®Ø·Ø£ XLSX:', error);
        exportAutoCSV(keywords, negatives, analysis.field);
      }
    }

    // ØªØµØ¯ÙŠØ± CSV ØªÙ„Ù‚Ø§Ø¦ÙŠ (Ø¨Ø¯ÙŠÙ„)
    function exportAutoCSV(keywords, negatives, field) {
      const csvRows = ['Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø°ÙƒÙŠØ©,Ù†ÙˆØ¹ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø©,Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©,Ø§Ù„Ù‡Ø¯Ù'];
      keywords.forEach((kw, i) => {
        const priority = i < 15 ? 'Ø¹Ø§Ù„ÙŠØ©' : i < 30 ? 'Ù…ØªÙˆØ³Ø·Ø©' : 'Ù…Ù†Ø®ÙØ¶Ø©';
        csvRows.push(`${kw},Ø°ÙƒÙŠØ©,${priority},ØªÙ„Ù‚Ø§Ø¦ÙŠ`);
      });
      
      const csvContent = '\ufeff' + csvRows.join('\n');
      const blob = new Blob([csvContent], {type: 'text/csv;charset=utf-8;'});
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = `AI-${field.replace(/\s+/g,'-')}-${Date.now()}.csv`;
      link.click();
      URL.revokeObjectURL(link.href);
      
      alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ù…Ù„Ù CSV Ø°ÙƒÙŠ!');
    }

    // ØªØµØ¯ÙŠØ± Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ø¬Ø§Ù„
    function exportProfile(analysis, keywords) {
      const profileData = {
        field: analysis.field,
        intent: analysis.intent,
        confidence: analysis.confidence,
        keywords: keywords,
        generated_at: new Date().toISOString(),
        ai_generated: true
      };
      
      const blob = new Blob([JSON.stringify(profileData, null, 2)], {type: 'application/json'});
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = `Profile-${analysis.field.replace(/\s+/g,'-')}.json`;
      link.click();
      URL.revokeObjectURL(link.href);
      
      alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ø¬Ø§Ù„!');
    }

    // ØªØµØ¯ÙŠØ± Ø´Ø§Ù…Ù„ (Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙŠØº)
    function exportAllFormats(analysis, keywords, negatives, budget, selection) {
      exportAutoXLSX(analysis, keywords, negatives, budget, selection);
      setTimeout(() => exportProfile(analysis, keywords), 1000);
      setTimeout(() => exportAutoCSV(keywords, negatives, analysis.field), 2000);
    }

    // Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('DOMContentLoaded', async () => {
      console.log('ğŸ¤– ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...');
      await loadAIDatabase();
      
      const input = document.getElementById('aiInput');
      const generateBtn = document.getElementById('aiGenerate');
      
      // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
      generateBtn.addEventListener('click', () => {
        const userInput = input.value.trim();
        if (!userInput) {
          alert('Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ù…Ø¬Ø§Ù„Ùƒ Ø£Ùˆ Ø®Ø¯Ù…ØªÙƒ');
          return;
        }
        
        generateAIContent(userInput);
      });
      
      // ØªÙØ¹ÙŠÙ„ Enter Ù„Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø³Ø±ÙŠØ¹
      input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          generateBtn.click();
        }
      });
      
      // Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø©
      input.addEventListener('input', (e) => {
        const value = e.target.value.toLowerCase();
        if (value.length > 2) {
          // Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø°ÙƒÙŠØ© (ÙŠÙ…ÙƒÙ† ØªÙˆØ³ÙŠØ¹Ù‡Ø§)
          const suggestions = [
            'Ù…ÙŠØ¯ÙŠØ§ Ø¨Ø§ÙŠØ±', 'Ø§Ø¹Ù„Ø§Ù†Ø§Øª Ù…Ù…ÙˆÙ„Ø©', 'Ø¯ÙƒØªÙˆØ± Ù†Ø³Ø§Ø¡', 'Ù†Ù‚Ù„ Ø§Ø«Ø§Ø«', 
            'Ù…Ø·Ø¹Ù…', 'ÙƒØ§ÙÙŠÙ‡', 'ØµØ§Ù„ÙˆÙ†', 'Ø¹ÙŠØ§Ø¯Ø© Ø§Ø³Ù†Ø§Ù†', 'Ù…Ø­Ø§Ù…ÙŠ', 'Ù…Ø¯Ø±Ø³Ø©'
          ];
          
          const matches = suggestions.filter(s => s.includes(value));
          if (matches.length > 0) {
            // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù‡Ù†Ø§
          }
        }
      });
      
      console.log('âœ… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„');
    });
  </script>
</body>
</html>